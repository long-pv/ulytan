(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.i18n,s=window.wp.element;class o{handleFormToggle(e,t){const s=this;null!==e&&null!==t&&t.addEventListener("change",(function(){if(this.checked)return s.toggleFormElements(e,"enable"),void e.classList.remove("wpseo-local-form-elements-disabled");s.toggleFormElements(e,"disable"),e.classList.add("wpseo-local-form-elements-disabled")}))}toggleFormElements(e,t){e.querySelectorAll("input, select, textarea").forEach((e=>{"enable"===t?e.removeAttribute("disabled"):e.setAttribute("disabled","")}))}}class i{constructor({hideOpeningHours:e,useMultipleLocations:t,locationsAreSameOrganization:s,open247:i,useMultipleHours:n}){this.hideOpeningHours=e,this.useMultipleLocations=t,this.locationsAreSameOrganization=s,this.open247=i,this.useMultipleHours=n,this.updateOpeningHoursState=this.updateOpeningHoursState.bind(this),this.displayMultipleOpeningHours=this.displayMultipleOpeningHours.bind(this),this.handleDaily24hToggles=this.handleDaily24hToggles.bind(this),this.handleOpeningHoursOverride=this.handleOpeningHoursOverride.bind(this),this.utils=new o,this.handleDaily24hToggles(),this.automaticallySetToClosed(),this.handleSharedOpeningHoursToggle(),this.handleOpeningHoursOverride()}updateOpeningHoursState(){const e=document.querySelector("#opening-hours-settings"),t=document.querySelector("#opening-hours-time-settings"),s=document.querySelector("#opening-hours-time-settings-normal"),o=document.querySelector("#opening-hours-time-specification-wrap"),i=document.querySelector("#share-opening-hours-settings"),n=document.querySelector("#multiple_locations_shared_opening_hours");let l=!0,r=!0,a=!0,c=!0;if(this.hideOpeningHours.checked&&(l=!1,r=!1),this.useMultipleLocations.checked&&!this.locationsAreSameOrganization.checked&&(r=!1,c=!1),this.useMultipleLocations.checked||(c=!1),this.open247.checked&&(a=!1),this.displayOpeningHoursSettingsSection(e,l),this.displayOpeningHoursSettingsSection(t,r),this.displayOpeningHoursSettingsSection(o,a),this.displayOpeningHoursSettingsSection(i,c),!this.useMultipleLocations.checked||n.checked)return this.utils.toggleFormElements(s,"enable"),void s.classList.remove("wpseo-local-form-elements-disabled");this.utils.toggleFormElements(s,"disable"),s.classList.add("wpseo-local-form-elements-disabled")}displayOpeningHoursSettingsSection(e,t){e&&(e.style.display=t?"block":"none")}displayMultipleOpeningHours(){const e=document.querySelectorAll(".opening-hours-second"),t=document.querySelector(".opening-hours-second-description"),s=this.useMultipleHours.checked,o=e.length;for(let t=0;t<o;t++)s?e[t].classList.remove("hidden"):e[t].classList.add("hidden");this.displayOpeningHoursSettingsSection(t,s)}handleDaily24hToggles(){document.querySelectorAll(".wpseo_open_24h input[type='checkbox']").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".opening-hours").querySelectorAll("select").forEach((t=>{t.disabled=e.checked}))}))}))}handleOpeningHoursOverride(){document.querySelectorAll(".wpseo-local-location-opening-hours-override input[type='checkbox'], #_wpseo_is_overridden_business_timezone").forEach((e=>{e.addEventListener("change",(()=>{let t=e.closest(".wpseo-local-toggle-enabled-state-wrapper"),s=t.querySelectorAll(".wpseo-local-toggleable-enabled-state, .switch-container input[type='checkbox']"),o=!e.checked;o?t.classList.add("wpseo-local-has-disabled-elements"):t.classList.remove("wpseo-local-has-disabled-elements"),s.forEach((e=>{e.disabled=o}))}))}))}replaceHourFormatForElements(e,t){for(const s of e){const e=s.cloneNode(!0);for(const s of e.options)s.hasAttribute("data-time-format-12-hours")&&(s.text="24h"!==t?s.dataset["timeFormat-12Hours"]:s.dataset["timeFormat-24Hours"]);e.selectedIndex=s.selectedIndex,s.replaceWith(e)}this.automaticallySetToClosed()}automaticallySetToClosed(){document.querySelectorAll(".opening-hours select").forEach((e=>{e.addEventListener("change",(()=>{if("closed"===e.value){let t=e.closest(".opening-hours").querySelectorAll("select");e.id.includes("_second_")&&(t=e.closest(".opening-hours").querySelectorAll("[id*='_second_']")),t.forEach((e=>{e.selectedIndex=0}))}}))}))}handleSharedOpeningHoursToggle(){const e=document.querySelector("#opening-hours-time-settings-normal"),t=document.querySelector("#multiple_locations_shared_opening_hours");this.utils.handleFormToggle(e,t)}}const n=window.lodash.debounce;var l=e.n(n);const r=window.yoast.editorModules.components.portals.ImageSelectPortal;(new class{constructor(){this.open247=document.querySelector("#_wpseo_open_247"),this.multipleOpeningHoursFrontend=document.querySelector("#_wpseo_multiple_opening_hours"),this.timeFormatToggle=document.querySelector("#_wpseo_format_24h"),this.zipcode=document.querySelector("#wpseo_business_zipcode"),this.country=jQuery("#wpseo_business_country");const e={open247:this.open247,hideOpeningHours:!1,useMultipleHours:this.multipleOpeningHoursFrontend,useMultipleLocations:!0,locationsAreSameOrganization:!0};this.openingHours=new i(e),this.handleMissingZipcodeOrCountryAlert=this.handleMissingZipcodeOrCountryAlert.bind(this)}addEventListeners(){this.initializeSharedBusinessPropertiesOverrideCheckboxes(),this.open247&&this.open247.addEventListener("change",this.openingHours.updateOpeningHoursState),this.multipleOpeningHoursFrontend&&this.multipleOpeningHoursFrontend.addEventListener("change",(()=>this.openingHours.displayMultipleOpeningHours())),this.timeFormatToggle&&this.timeFormatToggle.addEventListener("change",(()=>this.openingHours.replaceHourFormatForElements(document.querySelectorAll(".openinghours-wrapper select"),this.detectTimeFormat()))),this.country&&this.country.on("change",this.handleMissingZipcodeOrCountryAlert),this.zipcode&&this.zipcode.addEventListener("keyup",l()(this.handleMissingZipcodeOrCountryAlert,300))}detectTimeFormat(){return this.timeFormatToggle.checked?"24h":"12h"}initializeSharedBusinessPropertiesOverrideCheckboxes(){const e=document.querySelectorAll("#wpseo-local-tab-business_info .wpseo-local-input-wrap");for(const t of e){const e=t.querySelector(".yoast-field-group__checkbox");if(null===e)continue;const s=e.querySelector("input[type='checkbox']"),o=t.querySelector("input[type='text'], select");let i=!s.checked;o.disabled=i,this.toggleDisabledClass(t,i),s.addEventListener("change",(()=>{i=!s.checked,o.disabled=i,this.toggleDisabledClass(t,i)}))}}toggleDisabledClass(e,t){t?e.classList.add("wpseo-local-has-disabled-elements"):e.classList.remove("wpseo-local-has-disabled-elements")}handleMissingZipcodeOrCountryAlert(){const e=document.querySelector("#wpseo-local-missing-zipcode-country-alert");null!==e&&(this.zipcode.value.trim().length>0&&""!==this.country.val()?e.style.display="none":e.style.display="flex")}}).addEventListeners();const a=document.createElement("div");document.body.appendChild(a),(0,s.render)(wp.element.createElement(r,{label:(0,t.__)("Location logo","yoast-local-seo"),hasPreview:!0,target:"wpseo_business_location_logo_imageSelect",hiddenField:"wpseo_business_location_logo"}),a)})();